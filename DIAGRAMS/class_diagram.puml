@startuml
skinparam classAttributeIconSize 0
Title: Recipe Roulette Enhanced Class Diagram

package "App" {
    class Main {
        - UserInterface UI
        - ServerProxy serverProxy
        - NotificationManager notificationManager
        +Main()
        +initialize()
        +shutdown()
        +startApplication()
        +handleUserInput()
        +loadData()
        +saveData()
    }

    class UserInterface {
        -String currentPage
        -RegisteredUser currentUser
        -HashMap<String, UserInput> userInputFields
        -HashMap<String, Component> components
        +renderHomeScreen()
        +renderLoginScreen()
        +renderUserProfile()
        +renderSearchPage()
        +renderRecipeSearchResults(recipes: Recipe[])
        +updateUserInfo()
        +showRecipeDetails(recipe: Recipe)
        +showFilteredRecipes(filter: Filter)
        +handleErrorMessages()
    }

    class ServerProxy {
        -APIProxy apiProxy
        -LocalDatabase localDatabase
        +sendRequest(request: Request)
        +receiveResponse(response: Response)
        +initialize()
        +shutdown()
        +syncDataWithServer()
        +handleServerError()
    }

    class NotificationManager {
        +sendNotification(notification: Notification)
        +scheduleNotification(notification: Notification, dateTime: DateTime)
    }

    class APIProxy {
        +fetchRecipes(filter: Filter)
        +submitRecipe(recipe: Recipe)
        +updateRecipe(recipe: Recipe)
    }

    class LocalDatabase {
        +addRecipe(recipe: Recipe)
        +deleteRecipe(recipeID: int)
        +searchRecipe(query: String)
    }

    Main "1" *-- "1" UserInterface
    Main "1" *-- "1" ServerProxy
    Main "1" *-- "1" NotificationManager
    ServerProxy "1" *-- "1" APIProxy
    ServerProxy "1" *-- "1" LocalDatabase
}

package "Server" {
    class Main {
        -String serverName
        -User[] users
        -RecipeDatabase database
        +initializeServer()
        +loadUsers()
        +loadDatabases()
    }

    class User {
        +userID: int
        +username: String
        +email: String
        +password: String
        +login()
        +deleteProfile()
    }

    class RegisteredUser {
        +points: int
        +searchRecipes()
        +uploadRecipe()
        +modifyRecipe()
        +saveRecipe()
        +removeRecipe()
        +filterRecipes(filter: Filter)
        +checkRewardStatus()
    }

    class GuestUser {
        +register()
    }

    class ContentAdmin {
        +userID: int
        +username: String
        +email: String
        +password: String
        +login()
        +deleteProfile()
        +approveRecipe(recipe: Recipe)
        +requestModification(recipeID: int)
    }

    class Recipe {
        +recipeID: int
        +name: String
        +ingredients: String
        +instructions: String
        +difficultyLevel: String
        +typeOfFood: String
        +timeRequired: int
        +foodType: String
        +dietaryRestrictions: String[]
        +allergies: String[]
    }

    class RecipeDatabase {
        -String databaseName
        -String databaseUrl
        +ConnectToDatabase()
        +RetrieveData()
        +StoreData()
        +UpdateData()
        +DeleteData()
    }

    Main "1" -- "0..*" User : manages
    Main "1" -- "0..*" ContentAdmin
    Main "1" -- "1" RecipeDatabase : owns
    User <|-- RegisteredUser
    User <|-- GuestUser
    RegisteredUser "1" -- "*" Recipe : owns
    Recipe "1" -- "0..*" ContentAdmin : reviewed by
}

@enduml
